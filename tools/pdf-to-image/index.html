<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDF↔이미지 변환기 — 페이지를 JPG/PNG 썸네일로 저장 | Yuchani Tools pro</title>
  <meta name="description" content="PDF 페이지를 고해상도 JPG·PNG 이미지로 변환합니다. 썸네일 제작, 리뷰 공유, 품질 제어, 일괄 ZIP 다운로드까지 모두 브라우저에서 처리." />
  <link rel="canonical" href="https://tools.yuchani.com/tools/pdf-to-image/" />
  <meta name="robots" content="index,follow" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="PDF↔이미지 변환기" />
  <meta property="og:description" content="PDF 페이지를 JPG·PNG로 추출하고 썸네일을 바로 공유하세요." />
  <meta property="og:url" content="https://tools.yuchani.com/tools/pdf-to-image/" />
  <meta property="og:image" content="https://tools.yuchani.com/og/cover.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- JSON-LD: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"PDF↔이미지 변환기",
    "applicationCategory":"MultimediaApplication",
    "operatingSystem":"Web",
    "url":"https://tools.yuchani.com/tools/pdf-to-image/",
    "description":"PDF 페이지를 JPG 또는 PNG 이미지로 변환하고 썸네일을 만드는 웹 툴",
    "aggregateRating":{"@type":"AggregateRating","ratingValue":"4.9","ratingCount":"127"}
  }
  </script>
  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"PDF를 JPG와 PNG 중 어떤 형식으로 저장할 수 있나요?","acceptedAnswer":{"@type":"Answer","text":"필요에 따라 JPG 또는 PNG로 저장할 수 있습니다. JPG는 용량이 작고, PNG는 투명 배경과 선명도를 유지합니다."}},
      {"@type":"Question","name":"이미지 품질과 해상도는 조절 가능한가요?","acceptedAnswer":{"@type":"Answer","text":"출력 해상도를 72~288DPI 범위에서 선택할 수 있고, JPG 품질도 60~100% 사이에서 조절할 수 있습니다."}},
      {"@type":"Question","name":"여러 페이지를 한 번에 다운로드할 수 있나요?","acceptedAnswer":{"@type":"Answer","text":"예. 변환 후 ZIP으로 묶어 한 번에 내려받을 수 있습니다."}},
      {"@type":"Question","name":"개인정보는 안전한가요?","acceptedAnswer":{"@type":"Answer","text":"모든 변환은 브라우저 안에서만 처리되며 서버로 파일이 업로드되지 않습니다."}},
      {"@type":"Question","name":"썸네일만 빠르게 뽑을 수 있나요?","acceptedAnswer":{"@type":"Answer","text":"낮은 DPI를 선택하면 빠르게 썸네일을 만들 수 있고, 미리보기에서 바로 다운로드 또는 복사할 수 있습니다."}}
    ]
  }
  </script>

  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/lucide@latest" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.worker.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js" defer></script>

  <style>
    :root{ color-scheme: dark }
    body{ background:#0F1113; padding-bottom: env(safe-area-inset-bottom); }
    .ring-soft{ box-shadow: inset 0 0 0 1px rgba(255,255,255,.08); }
    .panel{ background:#101218; }
    .brand-grad{ background-image:linear-gradient(90deg,#2dd4bf,#a3e635); }
    .card-grad{ background-image:linear-gradient(135deg,rgba(45,212,191,.12),rgba(163,230,53,.08)); }
    .dot-grid{ background-image:radial-gradient(circle at 1px 1px,rgba(255,255,255,.08) 1px,transparent 0);background-size:20px 20px; }
    .status-ok{ color:#bbf7d0; }
    .status-warn{ color:#facc15; }
    .status-err{ color:#fda4af; }
  </style>
</head>
<body class="text-white">
  <div data-include="/partials/header.html"></div>

  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
    <header class="mb-6">
      <div class="inline-flex items-center gap-2 rounded-full border border-emerald-400/40 bg-emerald-400/10 px-3 py-1 text-xs uppercase tracking-[0.2em] text-emerald-200">PDF workflow</div>
      <h1 class="mt-3 text-3xl md:text-4xl lg:text-5xl font-extrabold tracking-tight">
        <span class="brand-grad bg-clip-text text-transparent">PDF↔이미지 변환기</span>
      </h1>
      <p class="mt-3 max-w-3xl text-white/70 leading-relaxed">
        페이지 단위로 <strong>JPG·PNG 썸네일을 뽑고</strong>, 검토용 미리보기와 <strong>공유용 ZIP 묶기</strong>까지 한 번에. 전문 디자이너가 쓰는 워크플로우를 브라우저에서 구현했습니다.
      </p>
    </header>

    <!-- 업로드 & 옵션 -->
    <section class="grid gap-4 lg:grid-cols-[1.1fr_0.9fr]">
      <div class="rounded-2xl border border-white/10 ring-soft overflow-hidden relative">
        <div class="absolute inset-0 dot-grid opacity-[0.18] pointer-events-none"></div>
        <div class="relative p-5 panel">
          <h2 class="text-lg font-semibold text-white/90 flex items-center gap-2">
            <i data-lucide="upload" class="w-5 h-5 text-emerald-300"></i>
            PDF 업로드
          </h2>
          <p class="mt-1 text-sm text-white/60">파일을 선택하거나 드래그·드롭, 혹은 붙여넣기(Ctrl/⌘+V)로 바로 불러올 수 있습니다.</p>

          <label class="mt-4 flex flex-col items-center justify-center rounded-xl border border-dashed border-emerald-400/40 bg-emerald-400/5 px-6 py-10 text-center gap-3 cursor-pointer transition hover:bg-emerald-400/10" id="drop">
            <i data-lucide="files" class="w-9 h-9 text-emerald-300"></i>
            <span class="text-sm text-white/70">여기에 PDF를 놓거나 클릭해서 선택</span>
            <input type="file" id="pdf" accept="application/pdf" class="hidden" />
            <span id="fileMeta" class="text-xs text-white/40">최대 100MB 권장 · 브라우저에서만 처리</span>
          </label>

          <div class="mt-4 flex flex-wrap items-center gap-3 text-sm text-white/70">
            <span class="inline-flex items-center gap-1 rounded-full border border-white/10 bg-white/5 px-3 py-1">
              <i data-lucide="shield-check" class="w-4 h-4 text-emerald-300"></i>
              오프라인 처리
            </span>
            <span class="inline-flex items-center gap-1 rounded-full border border-white/10 bg-white/5 px-3 py-1">
              <i data-lucide="cpu" class="w-4 h-4 text-sky-300"></i>
              GPU 가속 지원
            </span>
            <span class="inline-flex items-center gap-1 rounded-full border border-white/10 bg-white/5 px-3 py-1">
              <i data-lucide="activity" class="w-4 h-4 text-lime-300"></i>
              실시간 진행률
            </span>
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-white/10 ring-soft overflow-hidden">
        <div class="relative p-5 panel card-grad">
          <h2 class="text-lg font-semibold text-white/90 flex items-center gap-2">
            <i data-lucide="sliders" class="w-5 h-5 text-emerald-300"></i>
            출력 옵션
          </h2>
          <div class="mt-4 space-y-4 text-sm text-white/80">
            <div>
              <div class="flex items-center justify-between">
                <span class="font-medium text-white/90">포맷</span>
                <span id="formatHint" class="text-xs text-white/50">JPG는 가볍고, PNG는 선명합니다.</span>
              </div>
              <div class="mt-2 flex flex-wrap gap-2">
                <label class="inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2">
                  <input type="radio" name="format" value="image/jpeg" class="accent-emerald-400" checked>
                  JPG
                </label>
                <label class="inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2">
                  <input type="radio" name="format" value="image/png" class="accent-emerald-400">
                  PNG
                </label>
              </div>
            </div>

            <div id="qualityGroup">
              <div class="flex items-center justify-between">
                <span class="font-medium text-white/90">JPG 품질</span>
                <span id="qualityLabel" class="text-xs text-white/50">90%</span>
              </div>
              <input type="range" id="quality" min="0.6" max="1" step="0.02" value="0.9" class="mt-2 w-full">
            </div>

            <div>
              <div class="flex items-center justify-between">
                <span class="font-medium text-white/90">출력 해상도</span>
                <span id="dpiLabel" class="text-xs text-white/50">180 DPI · 2.5배</span>
              </div>
              <input type="range" id="dpi" min="96" max="288" step="24" value="180" class="mt-2 w-full">
              <p class="mt-2 text-xs text-white/50">낮은 DPI는 썸네일/검토용, 높은 DPI는 인쇄용 이미지에 적합합니다.</p>
            </div>

            <div class="flex items-center justify-between text-sm">
              <label class="inline-flex items-center gap-2">
                <input type="checkbox" id="auto" class="accent-emerald-400" checked>
                파일 선택 시 자동 변환
              </label>
              <div class="text-xs text-white/50">단축키: <span class="rounded border border-white/20 px-1">Ctrl/⌘ + Enter</span></div>
            </div>

            <div class="flex flex-wrap gap-2">
              <button id="convert" class="flex-1 rounded-xl border border-emerald-400/40 bg-emerald-400/15 px-4 py-2 text-sm font-semibold text-emerald-200 hover:bg-emerald-400/25">페이지 변환</button>
              <button id="reset" class="rounded-xl border border-white/15 bg-white/5 px-4 py-2 text-sm text-white/70 hover:bg-white/10">초기화</button>
            </div>

            <div class="rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-xs leading-relaxed">
              <div class="flex items-center gap-2 text-white/60">
                <i data-lucide="info" class="w-4 h-4"></i>
                <span>대용량 PDF는 페이지 단위로 스트리밍 렌더링합니다.</span>
              </div>
              <div id="status" class="mt-2 text-white/50">PDF를 불러오면 진행 상황이 표시됩니다.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 결과 영역 -->
    <section class="mt-8">
      <div class="flex flex-wrap items-center gap-3">
        <h2 class="text-xl font-semibold text-white/90 flex items-center gap-2">
          <i data-lucide="images" class="w-5 h-5 text-emerald-300"></i>
          변환된 페이지
        </h2>
        <span id="summary" class="text-sm text-white/50">아직 변환된 페이지가 없습니다.</span>
        <button id="downloadAll" class="ml-auto inline-flex items-center gap-2 rounded-xl border border-emerald-400/40 bg-emerald-400/10 px-4 py-2 text-sm font-semibold text-emerald-200 hover:bg-emerald-400/20 disabled:opacity-30 disabled:pointer-events-none" disabled>
          <i data-lucide="archive" class="w-4 h-4"></i>
          ZIP으로 모두 저장
        </button>
      </div>

      <div id="gallery" class="mt-4 grid gap-4 sm:grid-cols-2 xl:grid-cols-3"></div>
    </section>

    <!-- 도움말 & FAQ -->
    <section class="mt-12 grid gap-6 lg:grid-cols-2">
      <div class="rounded-2xl border border-white/10 ring-soft p-6 panel">
        <h3 class="text-lg font-semibold text-white/90">사용 도움말 &amp; 팁</h3>
        <ul class="mt-4 space-y-3 text-sm text-white/70">
          <li class="flex gap-3">
            <i data-lucide="sparkles" class="mt-1 w-4 h-4 text-emerald-300"></i>
            <div><strong>썸네일 전용 프리셋</strong> — DPI를 120 이하로 낮추면 이메일·노션 공유용으로 가벼운 썸네일을 빠르게 만들 수 있습니다.</div>
          </li>
          <li class="flex gap-3">
            <i data-lucide="zoom-in" class="mt-1 w-4 h-4 text-sky-300"></i>
            <div><strong>디테일 유지</strong> — 설계 도면이나 스캔 문서는 PNG + 240DPI 이상을 추천합니다.</div>
          </li>
          <li class="flex gap-3">
            <i data-lucide="clock" class="mt-1 w-4 h-4 text-amber-300"></i>
            <div><strong>변환 중 멈춘 것 같다면</strong> — 페이지 수가 많은 PDF일수록 시간이 걸립니다. 상태창에서 진행률을 확인하세요.</div>
          </li>
          <li class="flex gap-3">
            <i data-lucide="folder-down" class="mt-1 w-4 h-4 text-lime-300"></i>
            <div><strong>폴더 정리</strong> — ZIP 다운로드는 페이지 번호를 자동으로 붙여 정렬 가능한 파일명을 제공합니다.</div>
          </li>
        </ul>
      </div>

      <div class="rounded-2xl border border-white/10 ring-soft p-6 panel">
        <h3 class="text-lg font-semibold text-white/90">사용 설명서 &amp; FAQ</h3>
        <div class="mt-4 space-y-4 text-sm text-white/70">
          <details class="rounded-xl border border-white/10 bg-white/5 px-4 py-3">
            <summary class="cursor-pointer font-medium text-white">1. 기본 사용 순서</summary>
            <p class="mt-2 text-white/70">PDF 업로드 → 출력 포맷/해상도 선택 → <strong>페이지 변환</strong> 클릭 또는 자동 실행 → 필요한 페이지를 개별 또는 ZIP으로 다운로드합니다.</p>
          </details>
          <details class="rounded-xl border border-white/10 bg-white/5 px-4 py-3">
            <summary class="cursor-pointer font-medium text-white">2. 특정 페이지만 저장하고 싶어요.</summary>
            <p class="mt-2 text-white/70">변환 후 미리보기 카드에서 원하는 페이지만 선택해 개별 다운로드 버튼을 누르면 됩니다.</p>
          </details>
          <details class="rounded-xl border border-white/10 bg-white/5 px-4 py-3">
            <summary class="cursor-pointer font-medium text-white">3. PDF가 암호화되어 있어요.</summary>
            <p class="mt-2 text-white/70">암호가 설정된 PDF는 현재 지원하지 않습니다. 먼저 잠금 해제 후 다시 시도하세요.</p>
          </details>
          <details class="rounded-xl border border-white/10 bg-white/5 px-4 py-3">
            <summary class="cursor-pointer font-medium text-white">4. 용량이 너무 커요.</summary>
            <p class="mt-2 text-white/70">JPG 포맷을 사용하고 품질을 0.8 이하로 낮춰 보세요. DPI를 조절하면 더 큰 용량 절감 효과가 있습니다.</p>
          </details>
          <details class="rounded-xl border border-white/10 bg-white/5 px-4 py-3">
            <summary class="cursor-pointer font-medium text-white">5. 모바일에서도 동작하나요?</summary>
            <p class="mt-2 text-white/70">모바일 브라우저에서도 동일한 인터페이스로 동작하도록 반응형으로 제작되었습니다.</p>
          </details>
        </div>
      </div>
    </section>
  </main>

  <div data-include="/partials/footer.html"></div>

  <script defer src="/inject-layout.js?v=8"></script>
  <script>
    (function(){
      async function injectOnce(sel, candidates){
        const host = document.querySelector(sel);
        if (!host || host.getAttribute('data-injected') === '1') return;
        for (const path of candidates){
          try{
            const res = await fetch(path, {cache:'no-store'});
            if (!res.ok) continue;
            const html = await res.text();
            host.innerHTML = html;
            host.setAttribute('data-injected','1');
            try{ window.lucide?.createIcons?.(); }catch(_){ }
            return;
          }catch(_){ }
        }
        console.warn('include 실패', sel, candidates);
      }
      function run(){
        const headerCandidates = ['/partials/header.html','partials/header.html','/yuchani-tools/partials/header.html','../partials/header.html'];
        const footerCandidates = ['/partials/footer.html','partials/footer.html','/yuchani-tools/partials/footer.html','../partials/footer.html'];
        injectOnce('[data-include="/partials/header.html"]', headerCandidates);
        injectOnce('[data-include="/partials/footer.html"]', footerCandidates);
      }
      if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', run); else run();
    })();
  </script>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    if (window.pdfjsLib){
      window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.worker.min.js';
    }
    const $ = (sel) => document.querySelector(sel);
    const pdfInput = $('#pdf');
    const dropZone = $('#drop');
    const statusEl = $('#status');
    const summaryEl = $('#summary');
    const gallery = $('#gallery');
    const convertBtn = $('#convert');
    const resetBtn = $('#reset');
    const formatRadios = document.querySelectorAll('input[name="format"]');
    const qualityGroup = $('#qualityGroup');
    const qualitySlider = $('#quality');
    const qualityLabel = $('#qualityLabel');
    const dpiSlider = $('#dpi');
    const dpiLabel = $('#dpiLabel');
    const autoToggle = $('#auto');
    const downloadAllBtn = $('#downloadAll');
    const fileMeta = $('#fileMeta');
    const formatHint = $('#formatHint');

    const state = {
      file: null,
      fileName: '',
      pdf: null,
      images: [],
      busy: false
    };

    const MIME_LABEL = {
      'image/jpeg': 'jpg',
      'image/png': 'png'
    };

    function setStatus(message, tone='info'){
      statusEl.textContent = message;
      statusEl.classList.remove('status-ok','status-warn','status-err');
      if (tone === 'ok') statusEl.classList.add('status-ok');
      if (tone === 'warn') statusEl.classList.add('status-warn');
      if (tone === 'err') statusEl.classList.add('status-err');
    }

    function resetState(keepFile=false){
      if (state.busy) return;
      state.pdf = null;
      if (!keepFile){
        state.file = null;
        state.fileName = '';
        pdfInput.value = '';
        fileMeta.textContent = '최대 100MB 권장 · 브라우저에서만 처리';
      }
      summaryEl.textContent = '아직 변환된 페이지가 없습니다.';
      setStatus('PDF를 불러오면 진행 상황이 표시됩니다.');
      downloadAllBtn.disabled = true;
      gallery.innerHTML = '';
      state.images.forEach(item => {
        if (item.objectUrl) URL.revokeObjectURL(item.objectUrl);
      });
      state.images = [];
    }

    function getFormat(){
      const checked = Array.from(formatRadios).find(r => r.checked);
      return checked ? checked.value : 'image/jpeg';
    }

    function updateFormatUI(){
      const format = getFormat();
      const isJpeg = format === 'image/jpeg';
      qualityGroup.style.display = isJpeg ? 'block' : 'none';
      formatHint.textContent = isJpeg ? 'JPG는 용량이 작고 빠르게 공유할 때 적합합니다.' : 'PNG는 투명 배경과 선명한 텍스트를 보존합니다.';
    }

    function updateQualityLabel(){
      qualityLabel.textContent = `${Math.round(parseFloat(qualitySlider.value) * 100)}%`;
    }

    function updateDpiLabel(){
      const dpi = parseInt(dpiSlider.value, 10);
      const scale = (dpi / 72).toFixed(1);
      dpiLabel.textContent = `${dpi} DPI · ${scale}배`;
    }

    async function loadPdf(file){
      try{
        const arrayBuffer = await file.arrayBuffer();
        const loadingTask = window.pdfjsLib.getDocument({ data: arrayBuffer });
        const pdf = await loadingTask.promise;
        state.pdf = pdf;
        setStatus(`${pdf.numPages}페이지 PDF 로드 완료. 옵션을 확인한 뒤 변환을 실행하세요.`, 'ok');
        summaryEl.textContent = `${pdf.numPages}페이지 문서 준비 완료`;
        if (autoToggle.checked){
          convertPdf();
        }
      }catch(err){
        console.error(err);
        setStatus('PDF를 불러오는 중 문제가 발생했습니다. 암호화 여부를 확인하거나 다른 파일로 시도하세요.', 'err');
      }
    }

    function onFileSelected(file){
      if (!file){
        resetState();
        return;
      }
      state.file = file;
      state.fileName = file.name || 'document';
      fileMeta.textContent = `${state.fileName} · ${(file.size/1024/1024).toFixed(2)} MB`;
      resetState(true);
      loadPdf(file);
    }

    async function convertPdf(){
      if (!state.pdf){
        setStatus('먼저 PDF를 업로드해주세요.', 'warn');
        return;
      }
      if (state.busy) return;
      state.busy = true;
      gallery.innerHTML = '';
      state.images.forEach(item => item.objectUrl && URL.revokeObjectURL(item.objectUrl));
      state.images = [];
      downloadAllBtn.disabled = true;

      const pdf = state.pdf;
      const total = pdf.numPages;
      const format = getFormat();
      const ext = MIME_LABEL[format] || 'img';
      const isJpeg = format === 'image/jpeg';
      const quality = isJpeg ? parseFloat(qualitySlider.value) : undefined;
      const dpi = parseInt(dpiSlider.value, 10);
      const scale = dpi / 72;

      setStatus(`총 ${total}페이지 렌더링 중…`, 'warn');
      summaryEl.textContent = '렌더링 준비 중입니다.';

      let successCount = 0;

      try {
        for (let pageNum = 1; pageNum <= total; pageNum++){
          try{
            setStatus(`페이지 ${pageNum}/${total} 렌더링…`, 'warn');
            const page = await pdf.getPage(pageNum);
            const viewport = page.getViewport({ scale });
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d', { alpha: false });
            canvas.width = Math.floor(viewport.width);
            canvas.height = Math.floor(viewport.height);
            await page.render({ canvasContext: context, viewport }).promise;

            const blob = await new Promise((resolve, reject) => {
              canvas.toBlob((b) => {
                if (b) resolve(b); else reject(new Error('이미지 생성 실패'));
              }, format, quality);
            });
            const objectUrl = URL.createObjectURL(blob);
            const dataUrl = canvas.toDataURL(format, quality);
            const sizeKB = (blob.size / 1024).toFixed(1);
            const extLabel = (ext || 'img').toUpperCase();

            const card = document.createElement('article');
            card.className = 'rounded-2xl border border-white/10 ring-soft overflow-hidden bg-[#11151d]/80 flex flex-col';
            card.innerHTML = `
              <div class="relative aspect-[3/4] bg-black/40 grid place-items-center overflow-hidden">
                <img src="${dataUrl}" alt="페이지 ${pageNum}" class="w-full h-full object-contain" loading="lazy" />
                <div class="absolute left-3 top-3 inline-flex items-center gap-1 rounded-full border border-white/20 bg-black/50 px-2 py-0.5 text-[11px] text-white/70">#${pageNum}</div>
              </div>
              <div class="p-4 space-y-3 text-sm text-white/70 flex-1 flex flex-col">
                <div class="flex flex-wrap items-center gap-2 text-xs text-white/50">
                  <span class="inline-flex items-center gap-1 rounded border border-white/15 bg-white/5 px-2 py-0.5">${extLabel}</span>
                  <span>${Math.round(canvas.width)}×${Math.round(canvas.height)}</span>
                  <span>${sizeKB} KB</span>
                </div>
                <div class="mt-auto grid gap-2 sm:grid-cols-2">
                  <a href="${objectUrl}" download="${getBaseName(state.fileName)}-p${String(pageNum).padStart(3,'0')}.${ext}" class="inline-flex items-center justify-center gap-1 rounded-lg border border-emerald-400/40 bg-emerald-400/10 px-3 py-2 text-xs font-semibold text-emerald-200 hover:bg-emerald-400/20">
                    <i data-lucide="download" class="w-4 h-4"></i>
                    다운로드
                  </a>
                  <button class="inline-flex items-center justify-center gap-1 rounded-lg border border-white/15 bg-white/5 px-3 py-2 text-xs text-white/70 hover:bg-white/10" data-action="copy" data-url="${dataUrl}">
                    <i data-lucide="clipboard" class="w-4 h-4"></i>
                    링크 복사
                  </button>
                  <button class="sm:col-span-2 inline-flex items-center justify-center gap-1 rounded-lg border border-white/15 bg-white/5 px-3 py-2 text-xs text-white/70 hover:bg-white/10" data-action="open" data-url="${dataUrl}">
                    <i data-lucide="external-link" class="w-4 h-4"></i>
                    새 탭에서 보기
                  </button>
                </div>
              </div>
            `;

            gallery.appendChild(card);
            state.images.push({ page: pageNum, blob, objectUrl, dataUrl, width: canvas.width, height: canvas.height, ext });
            successCount = state.images.length;
            summaryEl.textContent = `${successCount}/${total}페이지 변환 완료`;
            try{ window.lucide?.createIcons?.({ root: card }); }catch(_){ }
            await new Promise(r => requestAnimationFrame(r));
          }catch(err){
            console.error(err);
            setStatus(`페이지 ${pageNum} 변환 중 오류가 발생했습니다.`, 'err');
          }
        }

        if (successCount){
          setStatus(`총 ${successCount}개 페이지를 이미지로 변환했습니다.`, 'ok');
          summaryEl.textContent = `${successCount}개 이미지 준비 완료`;
          downloadAllBtn.disabled = false;
        }else{
          setStatus('변환된 페이지가 없습니다. 옵션을 조정한 뒤 다시 시도하세요.', 'warn');
        }
      } catch (err) {
        console.error(err);
        setStatus('PDF 렌더링 중 알 수 없는 오류가 발생했습니다.', 'err');
      } finally {
        state.busy = false;
      }
    }

    function getBaseName(name){
      return (name || 'document').replace(/\.[^.]+$/, '').replace(/[^a-zA-Z0-9-_]+/g, '-');
    }

    async function downloadAll(){
      if (!state.images.length) return;
      if (typeof JSZip === 'undefined' || typeof saveAs === 'undefined'){
        setStatus('ZIP 라이브러리를 불러오지 못했습니다. 잠시 후 다시 시도하세요.', 'err');
        return;
      }
      try{
        setStatus('ZIP 패키징 중…', 'warn');
        const zip = new JSZip();
        const baseName = getBaseName(state.fileName);
        for (const img of state.images){
          const ext = img.ext || 'img';
          zip.file(`${baseName}-p${String(img.page).padStart(3,'0')}.${ext}`, img.blob);
        }
        const blob = await zip.generateAsync({ type: 'blob' });
        saveAs(blob, `${baseName}-pages.zip`);
        setStatus('ZIP 파일 다운로드를 시작했습니다.', 'ok');
      }catch(err){
        console.error(err);
        setStatus('ZIP 파일 생성 중 오류가 발생했습니다.', 'err');
      }
    }

    function handleAction(e){
      const target = e.target.closest('[data-action]');
      if (!target) return;
      const action = target.getAttribute('data-action');
      const url = target.getAttribute('data-url');
      if (action === 'copy' && url){
        if (navigator.clipboard?.writeText){
          navigator.clipboard.writeText(url).then(() => {
            setStatus('이미지 데이터 URL을 복사했습니다.', 'ok');
          }).catch(() => {
            setStatus('클립보드 접근이 거부되었습니다.', 'err');
          });
        } else {
          setStatus('이 브라우저에서는 자동 복사가 지원되지 않습니다.', 'warn');
        }
      }
      if (action === 'open' && url){
        window.open(url, '_blank', 'noopener');
      }
    }

    convertBtn.addEventListener('click', (e) => {
      e.preventDefault();
      convertPdf();
    });

    resetBtn.addEventListener('click', (e) => {
      e.preventDefault();
      resetState();
    });

    downloadAllBtn.addEventListener('click', (e) => {
      e.preventDefault();
      downloadAll();
    });

    gallery.addEventListener('click', handleAction);

    pdfInput.addEventListener('change', (e) => {
      const file = e.target.files?.[0];
      if (file && file.type === 'application/pdf'){
        onFileSelected(file);
      }else if (file){
        setStatus('PDF 파일만 지원합니다.', 'warn');
      }
    });

    document.addEventListener('paste', (event) => {
      const file = Array.from(event.clipboardData?.files || []).find(f => f.type === 'application/pdf');
      if (file){
        onFileSelected(file);
      }
    });

    dropZone.addEventListener('dragover', (event) => {
      event.preventDefault();
      dropZone.classList.add('border-emerald-300');
    });

    dropZone.addEventListener('dragleave', () => {
      dropZone.classList.remove('border-emerald-300');
    });

    dropZone.addEventListener('drop', (event) => {
      event.preventDefault();
      dropZone.classList.remove('border-emerald-300');
      const file = Array.from(event.dataTransfer?.files || []).find(f => f.type === 'application/pdf');
      if (file){
        onFileSelected(file);
      }else{
        setStatus('PDF 파일을 드롭해주세요.', 'warn');
      }
    });

    document.addEventListener('keydown', (event) => {
      if ((event.ctrlKey || event.metaKey) && event.key === 'Enter'){
        event.preventDefault();
        convertPdf();
      }
    });

    formatRadios.forEach(radio => radio.addEventListener('change', updateFormatUI));
    qualitySlider.addEventListener('input', updateQualityLabel);
    dpiSlider.addEventListener('input', updateDpiLabel);

    updateFormatUI();
    updateQualityLabel();
    updateDpiLabel();
    setStatus('PDF를 불러오면 진행 상황이 표시됩니다.');
    try{ window.lucide?.createIcons?.(); }catch(_){ }
  });
  </script>
</body>
</html>
