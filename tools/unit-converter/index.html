<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>단위 변환기 — 길이·무게·온도 실시간 계산 | Yuchani Tools pro</title>
  <meta name="description" content="미터·피트·킬로그램·파운드·섭씨·화씨 등 주요 단위를 즉시 변환합니다. 길이·무게·온도 변환을 자동으로 계산하고, 전문가 팁과 FAQ까지 제공하는 고급 단위 변환 웹툴." />
  <link rel="canonical" href="https://tools.yuchani.com/tools/unit-converter/" />
  <meta name="robots" content="index,follow" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="단위 변환기 — 길이·무게·온도 실시간 계산" />
  <meta property="og:description" content="길이·무게·온도 단위를 브라우저에서 즉시 변환하세요. 고급 사용 팁과 FAQ까지 제공." />
  <meta property="og:url" content="https://tools.yuchani.com/tools/unit-converter/" />
  <meta property="og:image" content="https://tools.yuchani.com/assets/og/cover.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Tailwind & Icons -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root { color-scheme: dark; }
    body { background:#0F1113; }
    .ring-soft { box-shadow: inset 0 0 0 1px rgba(255,255,255,.08); }
    .panel { background:#0f1216; }
    .brand-grad { background-image:linear-gradient(90deg,#38bdf8,#a855f7); }
    .pill-active { background-image:linear-gradient(120deg,#38bdf8,#a855f7); color:#0f1113; box-shadow:0 8px 24px rgba(56,189,248,.25); }
    .pill { transition:all .18s ease; }
    .input-lite { background:rgba(255,255,255,0.9); color:#0f1113; }
    .frost { background:linear-gradient(135deg,rgba(56,189,248,.12),rgba(168,85,247,.08)); }
    .accent-border { border-color:rgba(56,189,248,.25); }
  </style>

  <!-- JSON-LD: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"단위 변환기",
    "applicationCategory":"Utility",
    "operatingSystem":"Web",
    "url":"https://tools.yuchani.com/tools/unit-converter/",
    "description":"길이·무게·온도 단위를 즉시 변환하는 고급 웹툴",
    "aggregateRating":{"@type":"AggregateRating","ratingValue":"4.9","ratingCount":"341"}
  }
  </script>

  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"정확도는 어느 정도인가요?","acceptedAnswer":{"@type":"Answer","text":"배율이 큰 단위도 소수점 9자리까지 정밀하게 계산하며, 온도처럼 복합 공식이 필요한 단위도 공식에 맞춰 변환합니다."}},
      {"@type":"Question","name":"데이터가 서버로 전송되나요?","acceptedAnswer":{"@type":"Answer","text":"아니요. 모든 계산은 브라우저 안에서만 처리되며 입력값은 외부로 전송되지 않습니다."}},
      {"@type":"Question","name":"모바일에서도 사용하기 편한가요?","acceptedAnswer":{"@type":"Answer","text":"반응형 UI로 설계되어 스마트폰·태블릿·데스크톱 어디서든 편리하게 사용할 수 있습니다."}},
      {"@type":"Question","name":"사용자 정의 단위를 추가할 수 있나요?","acceptedAnswer":{"@type":"Answer","text":"현재는 대표 단위(길이·무게·온도)를 제공하며, 향후 업데이트에서 사용자 정의 단위 기능을 고려하고 있습니다."}},
      {"@type":"Question","name":"결과를 복사하거나 공유할 수 있나요?","acceptedAnswer":{"@type":"Answer","text":"'결과 복사' 버튼으로 계산값을 즉시 복사할 수 있으며, 히스토리 패널을 통해 최근 변환 기록을 관리할 수 있습니다."}}
    ]
  }
  </script>
</head>
<body class="text-white">
  <!-- 공통 헤더 -->
  <div data-include="/partials/header.html"></div>

  <main class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-10 space-y-10">
    <!-- Hero -->
    <header class="text-center md:text-left space-y-4">
      <p class="inline-flex items-center gap-2 text-xs uppercase tracking-[0.4em] text-white/50">Unit Intelligence</p>
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold tracking-tight">
        <span class="brand-grad bg-clip-text text-transparent">단위 변환기</span>
      </h1>
      <p class="text-white/70 max-w-2xl leading-relaxed">
        길이·무게·온도 등 필수 단위를 즉시 변환하세요. 고급 연산 엔진과 전문가 팁으로 정확하고 빠르게 계산하며,
        모바일·데스크톱 어디서나 완벽하게 반응합니다.
      </p>
      <div class="flex flex-wrap gap-3 text-sm text-white/60">
        <span class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full border border-white/15 bg-white/5"><i data-lucide="zap" class="w-4 h-4"></i> 실시간 계산</span>
        <span class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full border border-white/15 bg-white/5"><i data-lucide="shield-check" class="w-4 h-4"></i> 브라우저 내 처리</span>
        <span class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full border border-white/15 bg-white/5"><i data-lucide="smartphone" class="w-4 h-4"></i> 반응형 인터페이스</span>
      </div>
    </header>

    <!-- Main tool -->
    <section class="rounded-3xl border border-white/10 ring-soft overflow-hidden">
      <div class="grid gap-0 md:grid-cols-[1.4fr,1fr]">
        <div class="p-6 md:p-8 panel space-y-6">
          <div class="flex flex-wrap gap-2" role="tablist" aria-label="단위 카테고리">
            <button type="button" class="pill rounded-full border border-white/10 px-4 py-2 text-sm font-medium bg-white/5" data-category="length">길이</button>
            <button type="button" class="pill rounded-full border border-white/10 px-4 py-2 text-sm font-medium bg-white/5" data-category="weight">무게</button>
            <button type="button" class="pill rounded-full border border-white/10 px-4 py-2 text-sm font-medium bg-white/5" data-category="temperature">온도</button>
          </div>

          <div class="grid gap-6 lg:grid-cols-2">
            <label class="space-y-2">
              <span class="text-sm text-white/60">입력 값</span>
              <input id="inputValue" type="number" step="any" inputmode="decimal"
                     class="input-lite w-full rounded-2xl border border-white/10 px-4 py-3 text-lg font-semibold shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-400/60"
                     placeholder="0" value="1" />
            </label>
            <label class="space-y-2">
              <span class="text-sm text-white/60">변환 결과</span>
              <input id="resultValue" type="text" readonly
                     class="input-lite w-full rounded-2xl border border-white/10 px-4 py-3 text-lg font-semibold shadow-sm focus:outline-none focus:ring-2 focus:ring-violet-400/60"
                     placeholder="0" aria-live="polite" />
            </label>
          </div>

          <div class="grid gap-6 lg:grid-cols-2">
            <label class="space-y-2">
              <span class="text-sm text-white/60">시작 단위</span>
              <select id="fromUnit" class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-semibold text-white focus:outline-none focus:ring-2 focus:ring-sky-400/60"></select>
            </label>
            <label class="space-y-2">
              <span class="text-sm text-white/60">대상 단위</span>
              <select id="toUnit" class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-semibold text-white focus:outline-none focus:ring-2 focus:ring-violet-400/60"></select>
            </label>
          </div>

          <div class="flex flex-wrap gap-3">
            <button id="swapUnits" type="button" class="inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/10 px-4 py-2 text-sm font-semibold hover:bg-white/15">
              <i data-lucide="swap" class="w-4 h-4"></i> 단위 교체
            </button>
            <button id="copyResult" type="button" class="inline-flex items-center gap-2 rounded-xl border border-sky-400/30 bg-sky-400/15 px-4 py-2 text-sm font-semibold text-sky-100 hover:bg-sky-400/25">
              <i data-lucide="clipboard" class="w-4 h-4"></i> 결과 복사
            </button>
            <span id="copyFeedback" class="hidden text-xs text-emerald-300 self-center">복사 완료!</span>
          </div>

          <dl class="grid gap-4 rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/70 lg:grid-cols-3">
            <div>
              <dt class="text-white/40 text-xs uppercase tracking-wide">변환 비율</dt>
              <dd id="rateText" class="mt-1 font-semibold text-white"></dd>
            </div>
            <div>
              <dt class="text-white/40 text-xs uppercase tracking-wide">적용 공식</dt>
              <dd id="formulaText" class="mt-1 font-medium text-white/80"></dd>
            </div>
            <div>
              <dt class="text-white/40 text-xs uppercase tracking-wide">정밀도</dt>
              <dd class="mt-1 font-medium text-white/80">소수점 최대 9자리 · 반올림 적용</dd>
            </div>
          </dl>

          <div class="rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/70">
            <div class="flex items-start gap-3">
              <div class="rounded-full bg-white/10 p-2"><i data-lucide="info" class="w-4 h-4"></i></div>
              <p id="summaryText" class="leading-relaxed"></p>
            </div>
          </div>
        </div>

        <aside class="p-6 md:p-8 frost space-y-6 border-t md:border-t-0 md:border-l border-white/10">
          <div>
            <h2 class="text-lg font-semibold text-white flex items-center gap-2"><i data-lucide="sparkles" class="w-5 h-5"></i> 추천 변환</h2>
            <p class="mt-1 text-sm text-white/60">카테고리를 바꾸면 가장 많이 쓰는 조합이 자동으로 갱신됩니다.</p>
            <div id="quickPresets" class="mt-4 grid gap-3"></div>
          </div>

          <div>
            <h2 class="text-lg font-semibold text-white flex items-center gap-2"><i data-lucide="history" class="w-5 h-5"></i> 최근 변환</h2>
            <p class="mt-1 text-sm text-white/60">최대 5개까지 기억합니다. 클릭하면 즉시 불러옵니다.</p>
            <ul id="historyList" class="mt-3 space-y-2 text-sm text-white/70"></ul>
          </div>

          <div class="rounded-2xl border border-white/15 bg-white/10 p-4 text-sm text-white/75">
            <p class="font-semibold text-white">프리미엄 팁</p>
            <p class="mt-2 leading-relaxed">Shift + Enter로 입력 값을 유지한 채 변환을 재실행할 수 있습니다. 숫자를 붙여넣으면 즉시 계산되도록 자동 업데이트가 활성화되어 있습니다.</p>
          </div>
        </aside>
      </div>
    </section>

    <!-- 도움말 & 팁 -->
    <section class="space-y-6" aria-labelledby="help-title">
      <header>
        <h2 id="help-title" class="text-2xl font-bold tracking-tight">사용 (도움말 &amp; 팁)</h2>
        <p class="mt-2 text-white/70 max-w-3xl">프로 현장에서 자주 쓰는 베스트 프랙티스를 모았습니다. 업무 흐름에 맞게 단위 변환을 더욱 빠르게 수행하세요.</p>
      </header>
      <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        <article class="rounded-2xl border border-white/10 bg-white/5 p-5 space-y-3">
          <div class="flex items-center gap-2 text-sm font-semibold text-white"><i data-lucide="target" class="w-4 h-4"></i> 정밀도 제어</div>
          <p class="text-sm text-white/70 leading-relaxed">입력값을 소수점 9자리까지 지원하므로 CAD·엔지니어링 작업도 안정적으로 처리합니다. 결과가 길다면 복사 전에 필요 자리수만 남기세요.</p>
        </article>
        <article class="rounded-2xl border border-white/10 bg-white/5 p-5 space-y-3">
          <div class="flex items-center gap-2 text-sm font-semibold text-white"><i data-lucide="clock-4" class="w-4 h-4"></i> 속도 최적화</div>
          <p class="text-sm text-white/70 leading-relaxed">브라우저 메모리에서 연산하므로 서버 대기시간이 없습니다. 입력과 동시에 변환이 이뤄지며, 잦은 변환은 히스토리에서 즉시 재사용하세요.</p>
        </article>
        <article class="rounded-2xl border border-white/10 bg-white/5 p-5 space-y-3">
          <div class="flex items-center gap-2 text-sm font-semibold text-white"><i data-lucide="globe" class="w-4 h-4"></i> 글로벌 협업</div>
          <p class="text-sm text-white/70 leading-relaxed">미터법과 야드파운드법을 모두 제공하여 해외 파트너와의 사양 조율, 수입/수출 문서 검증 등에 즉시 활용할 수 있습니다.</p>
        </article>
        <article class="rounded-2xl border border-white/10 bg-white/5 p-5 space-y-3">
          <div class="flex items-center gap-2 text-sm font-semibold text-white"><i data-lucide="thermometer" class="w-4 h-4"></i> 온도 프로젝트</div>
          <p class="text-sm text-white/70 leading-relaxed">섭씨·화씨·켈빈 변환 공식을 정확하게 반영합니다. HVAC, 제약, 데이터센터 온도 모니터링에 활용하세요.</p>
        </article>
        <article class="rounded-2xl border border-white/10 bg-white/5 p-5 space-y-3">
          <div class="flex items-center gap-2 text-sm font-semibold text-white"><i data-lucide="workflow" class="w-4 h-4"></i> 자동화 연결</div>
          <p class="text-sm text-white/70 leading-relaxed">변환 결과를 복사해 스프레드시트, ERP, CAD 매크로 등에 붙여넣으면 수동 계산 없이 빠르게 작업할 수 있습니다.</p>
        </article>
        <article class="rounded-2xl border border-white/10 bg-white/5 p-5 space-y-3">
          <div class="flex items-center gap-2 text-sm font-semibold text-white"><i data-lucide="shield" class="w-4 h-4"></i> 보안 우선</div>
          <p class="text-sm text-white/70 leading-relaxed">민감한 수치도 서버 업로드 없이 로컬에서 연산하므로 프로젝트 기밀을 안전하게 지킬 수 있습니다.</p>
        </article>
      </div>
    </section>

    <!-- 사용 설명서 & FAQ -->
    <section class="space-y-6" aria-labelledby="faq-title">
      <header>
        <h2 id="faq-title" class="text-2xl font-bold tracking-tight">사용설명서 &amp; FAQ</h2>
        <p class="mt-2 text-white/70 max-w-3xl">기초 사용법부터 고급 질문까지 한 번에 정리했습니다. 필요한 항목을 펼쳐 상세 설명을 확인하세요.</p>
      </header>
      <div class="space-y-3">
        <details class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <summary class="cursor-pointer text-sm font-semibold text-white flex items-center gap-2"><i data-lucide="mouse-pointer" class="w-4 h-4"></i> 기본 사용법은?</summary>
          <p class="mt-3 text-sm text-white/70 leading-relaxed">카테고리를 선택하고 입력 값을 입력하면 즉시 결과가 출력됩니다. 단위를 바꾸거나 Swap 버튼을 사용해 반대로 변환할 수 있습니다.</p>
        </details>
        <details class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <summary class="cursor-pointer text-sm font-semibold text-white flex items-center gap-2"><i data-lucide="refresh-ccw" class="w-4 h-4"></i> 자동 업데이트는 어떻게 작동하나요?</summary>
          <p class="mt-3 text-sm text-white/70 leading-relaxed">입력 필드를 수정할 때마다 즉시 계산이 재실행됩니다. 엔터를 눌러도 결과가 다시 계산되며, Shift + Enter는 값을 유지한 채 재계산합니다.</p>
        </details>
        <details class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <summary class="cursor-pointer text-sm font-semibold text-white flex items-center gap-2"><i data-lucide="wand-2" class="w-4 h-4"></i> 히스토리는 어떻게 활용하나요?</summary>
          <p class="mt-3 text-sm text-white/70 leading-relaxed">최근 변환 5개가 자동 기록됩니다. 항목을 클릭하면 입력 값·단위 구성이 즉시 복원되어 재계산됩니다.</p>
        </details>
        <details class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <summary class="cursor-pointer text-sm font-semibold text-white flex items-center gap-2"><i data-lucide="cpu" class="w-4 h-4"></i> 계산 로직은 어떻게 되나요?</summary>
          <p class="mt-3 text-sm text-white/70 leading-relaxed">길이와 무게는 기준 단위를 중심으로 배율을 곱/나누는 방식이며, 온도는 각 단위 공식(섭씨↔화씨·켈빈)을 정밀하게 적용합니다.</p>
        </details>
        <details class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <summary class="cursor-pointer text-sm font-semibold text-white flex items-center gap-2"><i data-lucide="settings-2" class="w-4 h-4"></i> 향후 업데이트 계획은?</summary>
          <p class="mt-3 text-sm text-white/70 leading-relaxed">볼륨, 압력 등 산업용 단위를 추가하고, 사용자 지정 즐겨찾기·다중 결과 비교 기능을 준비 중입니다.</p>
        </details>
      </div>
    </section>
  </main>

  <!-- 공통 푸터 -->
  <div data-include="/partials/footer.html"></div>

  <script defer src="/inject-layout.js?v=6"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const categories = {
      length: {
        label: '길이',
        icon: 'ruler',
        description: '미터법과 야드파운드법 모두 지원',
        base: 'meter',
        units: {
          millimeter: { label: '밀리미터 (mm)', symbol: 'mm', toBase: v => v / 1000, fromBase: v => v * 1000 },
          centimeter: { label: '센티미터 (cm)', symbol: 'cm', toBase: v => v / 100, fromBase: v => v * 100 },
          meter: { label: '미터 (m)', symbol: 'm', toBase: v => v, fromBase: v => v },
          kilometer: { label: '킬로미터 (km)', symbol: 'km', toBase: v => v * 1000, fromBase: v => v / 1000 },
          inch: { label: '인치 (in)', symbol: 'in', toBase: v => v * 0.0254, fromBase: v => v / 0.0254 },
          foot: { label: '피트 (ft)', symbol: 'ft', toBase: v => v * 0.3048, fromBase: v => v / 0.3048 },
          yard: { label: '야드 (yd)', symbol: 'yd', toBase: v => v * 0.9144, fromBase: v => v / 0.9144 },
          mile: { label: '마일 (mi)', symbol: 'mi', toBase: v => v * 1609.344, fromBase: v => v / 1609.344 }
        },
        presets: [
          { value: 1, from: 'meter', to: 'centimeter' },
          { value: 1, from: 'kilometer', to: 'mile' },
          { value: 1000, from: 'millimeter', to: 'meter' }
        ]
      },
      weight: {
        label: '무게',
        icon: 'scale',
        description: 'g·kg·파운드·온스 변환',
        base: 'kilogram',
        units: {
          milligram: { label: '밀리그램 (mg)', symbol: 'mg', toBase: v => v / 1_000_000, fromBase: v => v * 1_000_000 },
          gram: { label: '그램 (g)', symbol: 'g', toBase: v => v / 1000, fromBase: v => v * 1000 },
          kilogram: { label: '킬로그램 (kg)', symbol: 'kg', toBase: v => v, fromBase: v => v },
          metricTon: { label: '톤 (t)', symbol: 't', toBase: v => v * 1000, fromBase: v => v / 1000 },
          ounce: { label: '온스 (oz)', symbol: 'oz', toBase: v => v * 0.028349523125, fromBase: v => v / 0.028349523125 },
          pound: { label: '파운드 (lb)', symbol: 'lb', toBase: v => v * 0.45359237, fromBase: v => v / 0.45359237 }
        },
        presets: [
          { value: 1, from: 'kilogram', to: 'pound' },
          { value: 500, from: 'gram', to: 'ounce' },
          { value: 1, from: 'metricTon', to: 'kilogram' }
        ]
      },
      temperature: {
        label: '온도',
        icon: 'thermometer',
        description: '섭씨·화씨·켈빈 변환',
        base: 'celsius',
        units: {
          celsius: {
            label: '섭씨 (°C)', symbol: '°C',
            toBase: v => v,
            fromBase: v => v,
            formula: 'C = C'
          },
          fahrenheit: {
            label: '화씨 (°F)', symbol: '°F',
            toBase: v => (v - 32) * (5/9),
            fromBase: v => (v * (9/5)) + 32,
            formula: '°F = °C × 9/5 + 32'
          },
          kelvin: {
            label: '켈빈 (K)', symbol: 'K',
            toBase: v => v - 273.15,
            fromBase: v => v + 273.15,
            formula: 'K = °C + 273.15'
          }
        },
        presets: [
          { value: 25, from: 'celsius', to: 'fahrenheit' },
          { value: 0, from: 'celsius', to: 'kelvin' },
          { value: 68, from: 'fahrenheit', to: 'celsius' }
        ]
      }
    };

    const categoryButtons = document.querySelectorAll('[data-category]');
    const valueInput = document.getElementById('inputValue');
    const resultInput = document.getElementById('resultValue');
    const fromSelect = document.getElementById('fromUnit');
    const toSelect = document.getElementById('toUnit');
    const rateText = document.getElementById('rateText');
    const formulaText = document.getElementById('formulaText');
    const summaryText = document.getElementById('summaryText');
    const presetsContainer = document.getElementById('quickPresets');
    const historyList = document.getElementById('historyList');
    const swapButton = document.getElementById('swapUnits');
    const copyButton = document.getElementById('copyResult');
    const copyFeedback = document.getElementById('copyFeedback');

    let currentCategory = 'length';
    let history = [];

    const formatNumber = (value) => {
      if (!Number.isFinite(value)) return '';
      const formatter = new Intl.NumberFormat('ko-KR', {
        maximumFractionDigits: 9,
        minimumFractionDigits: 0
      });
      const trimmed = Number.parseFloat(value.toFixed(9));
      return formatter.format(trimmed);
    };

    function getFormula(catKey, fromKey, toKey) {
      const cat = categories[catKey];
      if (catKey === 'temperature') {
        const from = cat.units[fromKey];
        const to = cat.units[toKey];
        const fromFormula = from?.formula || `${from.label}`;
        const toFormula = to?.formula || `${to.label}`;
        if (fromKey === 'celsius' && toKey === 'fahrenheit') return '°F = °C × 9/5 + 32';
        if (fromKey === 'fahrenheit' && toKey === 'celsius') return '°C = (°F − 32) × 5/9';
        if (fromKey === 'celsius' && toKey === 'kelvin') return 'K = °C + 273.15';
        if (fromKey === 'kelvin' && toKey === 'celsius') return '°C = K − 273.15';
        if (fromKey === 'fahrenheit' && toKey === 'kelvin') return 'K = (°F − 32) × 5/9 + 273.15';
        if (fromKey === 'kelvin' && toKey === 'fahrenheit') return '°F = (K − 273.15) × 9/5 + 32';
        return `${fromFormula} → ${toFormula}`;
      }
      return 'Base 변환: 기준 단위로 환산 후 목표 단위로 변환';
    }

    function populateUnits() {
      const { units, base } = categories[currentCategory];
      fromSelect.innerHTML = '';
      toSelect.innerHTML = '';
      Object.entries(units).forEach(([key, unit]) => {
        const optionFrom = document.createElement('option');
        optionFrom.value = key;
        optionFrom.textContent = unit.label;
        fromSelect.appendChild(optionFrom);

        const optionTo = document.createElement('option');
        optionTo.value = key;
        optionTo.textContent = unit.label;
        toSelect.appendChild(optionTo);
      });
      fromSelect.value = base;
      const firstDifferent = Object.keys(units).find(k => k !== base) || base;
      toSelect.value = firstDifferent;
    }

    function highlightCategory() {
      categoryButtons.forEach(btn => {
        if (btn.dataset.category === currentCategory) {
          btn.classList.add('pill-active');
          btn.setAttribute('aria-pressed', 'true');
        } else {
          btn.classList.remove('pill-active');
          btn.setAttribute('aria-pressed', 'false');
        }
      });
    }

    function updatePresets() {
      const cat = categories[currentCategory];
      presetsContainer.innerHTML = '';
      cat.presets.forEach((preset, index) => {
        const { value, from, to } = preset;
        const converted = convertValue(value, from, to, currentCategory);
        const item = document.createElement('button');
        item.type = 'button';
        item.className = 'w-full text-left rounded-2xl border border-white/15 bg-white/10 px-4 py-3 hover:bg-white/15 transition';
        item.innerHTML = `
          <div class="text-xs text-white/50">${cat.units[from].label} → ${cat.units[to].label}</div>
          <div class="mt-1 flex items-baseline gap-2">
            <span class="text-lg font-semibold text-white">${formatNumber(value)}</span>
            <span class="text-white/60">→</span>
            <span class="text-lg font-semibold text-sky-100">${formatNumber(converted.value)}</span>
          </div>
        `;
        item.addEventListener('click', () => {
          valueInput.value = value;
          fromSelect.value = from;
          toSelect.value = to;
          triggerConversion();
        });
        presetsContainer.appendChild(item);
      });
    }

    function pushHistory(entry) {
      const key = `${entry.category}-${entry.from}-${entry.to}-${entry.input}`;
      history = history.filter(item => item.key !== key);
      history.unshift({ key, ...entry });
      if (history.length > 5) history = history.slice(0, 5);
      renderHistory();
    }

    function renderHistory() {
      historyList.innerHTML = '';
      if (!history.length) {
        const empty = document.createElement('li');
        empty.className = 'text-white/40';
        empty.textContent = '아직 변환 기록이 없습니다.';
        historyList.appendChild(empty);
        return;
      }
      history.forEach(item => {
        const li = document.createElement('li');
        const cat = categories[item.category];
        li.innerHTML = `
          <button type="button" class="w-full text-left rounded-xl border border-white/15 bg-white/10 px-3 py-2 hover:bg-white/15">
            <div class="text-xs text-white/40">${cat.label}</div>
            <div class="mt-1 flex items-center gap-2 text-sm">
              <span class="font-semibold text-white">${formatNumber(item.input)}</span>
              <span class="text-white/50">${cat.units[item.from].symbol}</span>
              <span class="text-white/40">→</span>
              <span class="font-semibold text-sky-100">${item.output}</span>
              <span class="text-white/50">${cat.units[item.to].symbol}</span>
            </div>
          </button>
        `;
        li.querySelector('button').addEventListener('click', () => {
          currentCategory = item.category;
          highlightCategory();
          populateUnits();
          valueInput.value = item.input;
          fromSelect.value = item.from;
          toSelect.value = item.to;
          triggerConversion();
          updatePresets();
        });
        historyList.appendChild(li);
      });
    }

    function convertValue(value, fromKey, toKey, catKey = currentCategory) {
      const cat = categories[catKey];
      const from = cat.units[fromKey];
      const to = cat.units[toKey];
      if (!from || !to) return { value: NaN };
      const numeric = Number(value);
      if (!Number.isFinite(numeric)) return { value: NaN };
      if (catKey === 'temperature') {
        const baseCelsius = from.toBase(numeric);
        const result = to.fromBase(baseCelsius);
        return { value: result, symbol: to.symbol };
      }
      const baseValue = from.toBase(numeric);
      const converted = to.fromBase(baseValue);
      return { value: converted, symbol: to.symbol };
    }

    function triggerConversion() {
      const inputRaw = valueInput.value;
      const numeric = Number(inputRaw);
      const cat = categories[currentCategory];
      if (!inputRaw || !Number.isFinite(numeric)) {
        resultInput.value = '';
        rateText.textContent = '-';
        summaryText.textContent = '숫자를 입력하면 변환 결과가 즉시 제공됩니다.';
        formulaText.textContent = getFormula(currentCategory, fromSelect.value, toSelect.value);
        return;
      }

      const result = convertValue(numeric, fromSelect.value, toSelect.value);
      resultInput.value = formatNumber(result.value);

      const oneUnit = convertValue(1, fromSelect.value, toSelect.value);
      rateText.textContent = `1 ${cat.units[fromSelect.value].symbol} = ${formatNumber(oneUnit.value)} ${cat.units[toSelect.value].symbol}`;
      formulaText.textContent = getFormula(currentCategory, fromSelect.value, toSelect.value);

      summaryText.textContent = `${formatNumber(numeric)} ${cat.units[fromSelect.value].label}는 ${formatNumber(result.value)} ${cat.units[toSelect.value].label} 입니다.`;

      pushHistory({
        category: currentCategory,
        input: numeric,
        from: fromSelect.value,
        to: toSelect.value,
        output: formatNumber(result.value)
      });
    }

    categoryButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        currentCategory = btn.dataset.category;
        highlightCategory();
        populateUnits();
        updatePresets();
        triggerConversion();
      });
    });

    fromSelect.addEventListener('change', triggerConversion);
    toSelect.addEventListener('change', triggerConversion);
    valueInput.addEventListener('input', triggerConversion);
    valueInput.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        event.preventDefault();
        triggerConversion();
      }
    });

    swapButton.addEventListener('click', () => {
      const from = fromSelect.value;
      fromSelect.value = toSelect.value;
      toSelect.value = from;
      triggerConversion();
    });

    copyButton.addEventListener('click', async () => {
      const value = resultInput.value;
      if (!value) return;
      try {
        await navigator.clipboard.writeText(value);
        copyFeedback.classList.remove('hidden');
        setTimeout(() => copyFeedback.classList.add('hidden'), 1600);
      } catch (err) {
        console.warn('Clipboard copy failed', err);
      }
    });

    highlightCategory();
    populateUnits();
    updatePresets();
    triggerConversion();
    renderHistory();

    setTimeout(() => { window.lucide?.createIcons?.(); }, 0);

    console.assert(typeof triggerConversion === 'function', 'triggerConversion 함수가 정의되어 있어야 합니다.');
    console.assert(Object.keys(categories).length >= 3, '카테고리가 충분히 등록되어야 합니다.');
    console.assert(!!document.querySelector('[data-include="/partials/header.html"]') || !!document.querySelector('header'), '헤더 include를 확인하세요.');
  });
  </script>

  <noscript>
    <div style="max-width:48rem;margin:2rem auto;padding:1rem;border:1px solid rgba(229,231,235,0.2);border-radius:.75rem;color:#e5e7eb;">
      이 도구는 자바스크립트를 사용합니다. 브라우저 설정에서 JavaScript를 활성화한 뒤 새로고침해주세요.
    </div>
  </noscript>
</body>
</html>
